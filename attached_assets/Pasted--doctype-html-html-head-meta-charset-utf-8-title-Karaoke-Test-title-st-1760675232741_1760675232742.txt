<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Karaoke Test</title>
    <style>
      body { margin:0; font-family:system-ui; background:#000; color:#fff; }
      .wrap { display:flex; height:100vh; }
      .player { flex: 2; min-width: 640px; position: relative; }
      .lyrics { flex: 1; padding: 16px; overflow:auto; background: rgba(0,0,0,.6); }
      /* stock/AI visual background area (separate from YouTube) */
      .visual-bg { position: fixed; inset: 0; z-index: -1; opacity: .35; object-fit: cover; }
      iframe { width:100%; height:100%; border:0; }
    </style>
  </head>
  <body>
    <!-- Your stock/AI background video (royalty-free file you uploaded to Replit) -->
    <video class="visual-bg" src="/public/stock_bg.mp4" autoplay muted loop playsinline></video>

    <div class="wrap">
      <div class="player">
        <div id="ytplayer"></div>
      </div>
      <div class="lyrics" id="lyrics">
        <h2>Lyrics</h2>
        <div id="lines">
          <!-- render timed lyric lines here; highlight based on currentTime -->
        </div>
      </div>
    </div>

    <script src="https://www.youtube.com/iframe_api"></script>
    <script>
      let player;
      function onYouTubeIframeAPIReady() {
        player = new YT.Player('ytplayer', {
          videoId: 'VIDEO_ID_HERE', // e.g., official music video id
          playerVars: { rel:0, modestbranding:1, controls:1 },
          events: {
            onReady: () => { /* you can start a timer to sync lyric highlights */ }
          }
        });
      }

      // simple lyric timer example (replace with real timestamps)
      const lines = [
        { t: 5, text: "Line 1…" },
        { t: 12, text: "Line 2…" },
        { t: 20, text: "Line 3…" }
      ];
      const container = document.getElementById('lines');
      lines.forEach((l, i) => {
        const div = document.createElement('div'); div.id = 'l'+i; div.textContent = l.text; container.appendChild(div);
      });

      setInterval(() => {
        if (!player || player.getPlayerState() !== YT.PlayerState.PLAYING) return;
        const t = player.getCurrentTime();
        let active = -1;
        for (let i=0;i<lines.length;i++) if (t >= lines[i].t) active = i;
        [...container.children].forEach((el, i) => el.style.color = (i===active ? '#0ff' : '#ccc'));
      }, 250);
    </script>
  </body>
</html>
